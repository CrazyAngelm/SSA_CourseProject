<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="671px" preserveAspectRatio="none" style="width:731px;height:671px;background:#FFFFFF;" version="1.1" viewBox="0 0 731 671" width="731px" zoomAndPan="magnify"><defs/><g><g><title>OTA Agent</title><rect fill="#FFFFFF" height="205.7969" style="stroke:#181818;stroke-width:1;" width="10" x="271.229" y="141.9922"/></g><g><title>Health Agent</title><rect fill="#FFFFFF" height="183.4688" style="stroke:#181818;stroke-width:1;" width="10" x="646.8169" y="426.0547"/></g><rect fill="transparent" height="161.4688" style="stroke:#000000;stroke-width:1.5;" width="704.7476" x="10" y="441.0547"/><g><title>Central Management</title><rect fill="transparent" height="566.9297" width="8" x="96.8247" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="100" x2="100" y1="52.5938" y2="619.5234"/></g><g><title>OTA Agent</title><rect fill="transparent" height="566.9297" width="8" x="272.229" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="275.71" x2="275.71" y1="52.5938" y2="619.5234"/></g><g><title>Bootloader</title><rect fill="transparent" height="566.9297" width="8" x="482.4927" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="486.2354" x2="486.2354" y1="52.5938" y2="619.5234"/></g><g><title>Health Agent</title><rect fill="transparent" height="566.9297" width="8" x="647.8169" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="650.8862" x2="650.8862" y1="52.5938" y2="619.5234"/></g><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="161.6494" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147.6494" x="27" y="24.9951">Central Management</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21.6563" x="89.9966" y="41.292">VM</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="161.6494" x="20" y="618.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147.6494" x="27" y="638.5186">Central Management</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21.6563" x="89.9966" y="654.8154">VM</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.0381" x="231.71" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0381" x="238.71" y="41.292">OTA Agent</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89.0381" x="231.71" y="618.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75.0381" x="238.71" y="638.5186">OTA Agent</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.5146" x="441.2354" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.5146" x="448.2354" y="41.292">Bootloader</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90.5146" x="441.2354" y="618.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.5146" x="448.2354" y="638.5186">Bootloader</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105.8613" x="598.8862" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.8613" x="605.8862" y="41.292">Health Agent</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105.8613" x="598.8862" y="618.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91.8613" x="605.8862" y="638.5186">Health Agent</text><g><title>OTA Agent</title><rect fill="#FFFFFF" height="205.7969" style="stroke:#181818;stroke-width:1;" width="10" x="271.229" y="141.9922"/></g><g><title>Health Agent</title><rect fill="#FFFFFF" height="183.4688" style="stroke:#181818;stroke-width:1;" width="10" x="646.8169" y="426.0547"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="724.7476" x="0" y="83.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="724.7476" y1="83.1602" y2="83.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="724.7476" y1="86.1602" y2="86.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="144.2983" x="290.2246" y="72.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="125.7725" x="296.2246" y="88.6606">OTA Update Path</text><polygon fill="#181818" points="259.229,137.9922,269.229,141.9922,259.229,145.9922,263.229,141.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="100.8247" x2="265.229" y1="141.9922" y2="141.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.4043" x="107.8247" y="121.7935">Notify update available</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.9272" x="107.8247" y="136.9263">(download URL)</text><line style="stroke:#181818;stroke-width:1;" x1="281.229" x2="323.229" y1="171.125" y2="171.125"/><line style="stroke:#181818;stroke-width:1;" x1="323.229" x2="323.229" y1="171.125" y2="184.125"/><line style="stroke:#181818;stroke-width:1;" x1="282.229" x2="323.229" y1="184.125" y2="184.125"/><polygon fill="#181818" points="292.229,180.125,282.229,184.125,292.229,188.125,288.229,184.125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.1802" x="288.229" y="166.0591">Download update image</text><line style="stroke:#181818;stroke-width:1;" x1="281.229" x2="323.229" y1="228.3906" y2="228.3906"/><line style="stroke:#181818;stroke-width:1;" x1="323.229" x2="323.229" y1="228.3906" y2="241.3906"/><line style="stroke:#181818;stroke-width:1;" x1="282.229" x2="323.229" y1="241.3906" y2="241.3906"/><polygon fill="#181818" points="292.229,237.3906,282.229,241.3906,292.229,245.3906,288.229,241.3906" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.7715" x="288.229" y="208.1919">Verify signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.1206" x="288.229" y="223.3247">(cosign)</text><line style="stroke:#181818;stroke-width:1;" x1="281.229" x2="323.229" y1="270.5234" y2="270.5234"/><line style="stroke:#181818;stroke-width:1;" x1="323.229" x2="323.229" y1="270.5234" y2="283.5234"/><line style="stroke:#181818;stroke-width:1;" x1="282.229" x2="323.229" y1="283.5234" y2="283.5234"/><polygon fill="#181818" points="292.229,279.5234,282.229,283.5234,292.229,287.5234,288.229,283.5234" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169.5522" x="288.229" y="265.4575">Stage to inactive partition</text><polygon fill="#181818" points="474.4927,308.6563,484.4927,312.6563,474.4927,316.6563,478.4927,312.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="281.229" x2="480.4927" y1="312.6563" y2="312.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.2637" x="288.229" y="307.5903">Set next-boot to new image</text><line style="stroke:#181818;stroke-width:1;" x1="281.229" x2="323.229" y1="346.7891" y2="346.7891"/><line style="stroke:#181818;stroke-width:1;" x1="323.229" x2="323.229" y1="346.7891" y2="359.7891"/><line style="stroke:#181818;stroke-width:1;" x1="276.229" x2="323.229" y1="359.7891" y2="359.7891"/><polygon fill="#181818" points="286.229,355.7891,276.229,359.7891,286.229,363.7891,282.229,359.7891" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.1201" x="288.229" y="341.7231">Reboot device</text><line style="stroke:#181818;stroke-width:1;" x1="486.4927" x2="528.4927" y1="383.9219" y2="383.9219"/><line style="stroke:#181818;stroke-width:1;" x1="528.4927" x2="528.4927" y1="383.9219" y2="396.9219"/><line style="stroke:#181818;stroke-width:1;" x1="487.4927" x2="528.4927" y1="396.9219" y2="396.9219"/><polygon fill="#181818" points="497.4927,392.9219,487.4927,396.9219,497.4927,400.9219,493.4927,396.9219" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.231" x="493.4927" y="378.856">Boot new partition</text><polygon fill="#181818" points="634.8169,422.0547,644.8169,426.0547,634.8169,430.0547,638.8169,426.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="486.4927" x2="640.8169" y1="426.0547" y2="426.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.3242" x="493.4927" y="420.9888">Launch health checks</text><path d="M10,441.0547 L74.4429,441.0547 L74.4429,448.1875 L64.4429,458.1875 L10,458.1875 L10,441.0547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="transparent" height="161.4688" style="stroke:#000000;stroke-width:1.5;" width="704.7476" x="10" y="441.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="454.1216">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="129.25" x="89.4429" y="453.2651">[Health checks pass]</text><polygon fill="#181818" points="111.8247,475.3203,101.8247,479.3203,111.8247,483.3203,107.8247,479.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="105.8247" x2="645.8169" y1="479.3203" y2="479.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.5679" x="117.8247" y="474.2544">Report OK</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="714.7476" y1="488.3203" y2="488.3203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120.6079" x="15" y="498.5308">[Health checks fail]</text><polygon fill="#181818" points="497.4927,519.2578,487.4927,523.2578,497.4927,527.2578,493.4927,523.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="491.4927" x2="645.8169" y1="523.2578" y2="523.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.2925" x="503.4927" y="518.1919">Trigger rollback</text><line style="stroke:#181818;stroke-width:1;" x1="486.4927" x2="528.4927" y1="552.3906" y2="552.3906"/><line style="stroke:#181818;stroke-width:1;" x1="528.4927" x2="528.4927" y1="552.3906" y2="565.3906"/><line style="stroke:#181818;stroke-width:1;" x1="487.4927" x2="528.4927" y1="565.3906" y2="565.3906"/><polygon fill="#181818" points="497.4927,561.3906,487.4927,565.3906,497.4927,569.3906,493.4927,565.3906" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.1787" x="493.4927" y="547.3247">Boot old partition</text><polygon fill="#181818" points="111.8247,590.5234,101.8247,594.5234,111.8247,598.5234,107.8247,594.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="105.8247" x2="645.8169" y1="594.5234" y2="594.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.2266" x="117.8247" y="589.4575">Report rollback</text><!--SRC=[RP5FRy8m3CNl-HGMft50sgwJEgcmGwNHTMB0YOj9JHiHd2eDi7tx9U5VE_LIoVNFxzalxLvnWnOFuBzEITKWknnjfHXUdeNe_8NHZDXPr90ZOqK7NsrudOy0MvZbVRHOff1MdeXTN_NRKsESDbYIZVrfKIpxG4QeNTsHo58XaYGemQefqH5yeGUIH8XP3fEts7c5J-FKxXUE5mHFg3HkDMtugJHd3fQmMip70gLJfu24rKIOlKkyty2hY3huO_l8ccnmQLN5w8uso4iJgd6V-tP-59m1nT6GBYaxPVW6XjC3IGwOVjnawvC94qpd8US5HQ2aav8aIkhV4SKUeY7bAFHmlH5P2k29EHvPrb1VqfOroNtxo2PaxXkGTTjUh6s5dmuQNicd7zPgZ7LGV0ZIBVqRsFb7w0nSbrjQLLLamHgjjoZtaHWwmEYoSy2myLs4k1JTMBBq3m00]--></g></svg>